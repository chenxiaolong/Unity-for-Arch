Description: Build QtWebkit and use it only for QtAssistant.
Author: Felix Geyer <debfx-pkg@fobos.de>
Forwarded: no

---
 src/src.pro                                   |    4 ----
 tools/assistant/tools/assistant/assistant.pro |    7 ++-----
 2 files changed, 2 insertions(+), 9 deletions(-)

Index: qt-everywhere-opensource-src-4.8.4/src/src.pro
===================================================================
--- qt-everywhere-opensource-src-4.8.4.orig/src/src.pro	2013-01-09 12:42:23.357146954 +0000
+++ qt-everywhere-opensource-src-4.8.4/src/src.pro	2013-01-09 12:42:23.313146953 +0000
@@ -21,9 +21,7 @@
 contains(QT_CONFIG, svg): SRC_SUBDIRS += src_svg
 contains(QT_CONFIG, script): SRC_SUBDIRS += src_script
 contains(QT_CONFIG, declarative): SRC_SUBDIRS += src_declarative
-contains(QT_CONFIG, webkit)  {
     SRC_SUBDIRS += src_webkit
-}
 !contains(QT_CONFIG, no-gui):contains(QT_CONFIG, scripttools): SRC_SUBDIRS += src_scripttools
 SRC_SUBDIRS += src_plugins
 contains(QT_CONFIG, declarative): SRC_SUBDIRS += src_imports
@@ -111,11 +109,9 @@
    src_s60installs.depends = $$TOOLS_SUBDIRS $$SRC_SUBDIRS
    src_s60installs.depends -= src_s60installs
    src_imports.depends = src_gui src_declarative
-   contains(QT_CONFIG, webkit)  {
       src_webkit.depends = src_gui src_sql src_network
       contains(QT_CONFIG, xmlpatterns): src_webkit.depends += src_xmlpatterns
       src_imports.depends += src_webkit
-   }
    contains(QT_CONFIG, qt3support): src_plugins.depends += src_qt3support
    contains(QT_CONFIG, dbus):{
       src_plugins.depends += src_dbus
Index: qt-everywhere-opensource-src-4.8.4/tools/assistant/tools/assistant/assistant.pro
===================================================================
--- qt-everywhere-opensource-src-4.8.4.orig/tools/assistant/tools/assistant/assistant.pro	2013-01-09 12:42:23.357146954 +0000
+++ qt-everywhere-opensource-src-4.8.4/tools/assistant/tools/assistant/assistant.pro	2013-01-09 12:42:23.313146953 +0000
@@ -2,7 +2,8 @@
 TEMPLATE = app
 LANGUAGE = C++
 TARGET = assistant
-contains(QT_CONFIG, webkit):QT += webkit
+QT += webkit
+DEFINES += QT_WEBKIT
 CONFIG += qt \
     warn_on \
     help
@@ -85,11 +86,7 @@
     openpageswidget.cpp \
     openpagesmanager.cpp \
     openpagesswitcher.cpp
-contains(QT_CONFIG, webkit) {
     SOURCES += helpviewer_qwv.cpp
-} else {
-    SOURCES += helpviewer_qtb.cpp
-}
 
 FORMS += bookmarkdialog.ui \
     bookmarkmanagerwidget.ui \
